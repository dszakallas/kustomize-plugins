apiVersion: kustomize-plugins.dszakallas.github.com/v1alpha1
kind: YqTransform
metadata:
  name: sort-env-vars
  annotations:
    config.kubernetes.io/function: |
      exec:
        path: kustomize-plugin-yqtransform
spec:
  source:
    expression: "sort_by(.name)"
  targets:
  - select:
      kind: Deployment
    fieldPaths:
    - spec.template.spec.containers.*.env
    - spec.template.spec.initContainers.*.env
